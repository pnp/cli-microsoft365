# v9 Upgrade Guidance

The v9 of CLI for Microsoft 365 introduces several breaking changes. To help you upgrade to the latest version of CLI for Microsoft 365, we've listed those changes along with any actions you may need to take.

## App

### Updated option names of 'app permission add' to plural

We updated the [app permission add](./cmd/app/permission/permission-add.mdx) command. Option were updated to `applicationPermissions` and `delegatedPermissions`.

#### What action do I need to take?

- Please, check the documentation of the [app permission add](./cmd/app/permission/permission-add.mdx) command to see the updated options and adjust your scripts accordingly.

## Entra ID

### Removed deprecated Guest value from 'aad m365group user list' command.

The deprecated Guest value was removed from the `role` option in the [aad m365group user list](./cmd/entra/m365group/m365group-user-list.mdx) command.

#### What action do I need to take?

- Please, check the documentation of the aad m365group user list](./cmd/entra/m365group/m365group-user-list.mdx) command to see the updated ``role` option and adjust your scripts accordingly.

## SharePoint

### Updated `spo site appcatalog remove` options

We updated the [spo site appcatalog remove](./cmd/spo/site/site-appcatalog-remove.mdx) command. This command is a destructive operation that removes a site collection app catalog. Previously, it did not prompt for confirmation before executing this action, which could potentially lead to unintended data loss. To address this, we have added a confirmation prompt by default.

Because of this rework, we have added a new option.

**New options:**

Option | Description
--- | ---
`-f, --force` | Don't prompt for confirmation.

#### What action do I need to take?

Update your scripts with the following:

- Add the option `--force` if you want to bypass the confirmation prompt and proceed with the removal operation automatically.

### Removed the deprecated `wait` option and output from the `spo tenant recyclebinitem restore` command

For this new major version, we've removed the deprecated `wait` option from the `spo tenant recyclebinitem restore` command. The command now won't return a response on success.

#### What action do I need to take?

- Please, check the documentation of the [spo tenant recyclebinitem restore](./cmd/spo/tenant/tenant-recyclebinitem-restore.mdx) command to see the updated output and adjust your scripts accordingly.
- In the `spo tenant recyclebinitem restore` command, remove deprecated `wait` option from your scripts.

#### Aligned options with naming convention

We updated option naming from `groupDisplayName` to `groupName` and `userPrincipalName` to `userName`.

**Affected commands:**

- [entra group user list](./cmd/entra/group/group-user-list.mdx)
- [entra m365group conversation post list](./cmd/entra/m365group/m365group-conversation-post-list.mdx)
- [entra m365group recyclebinitem list](./cmd/entra/m365group/m365group-recyclebinitem-list.mdx)
- [outlook message get](./cmd/outlook/message/message-get.mdx)  

#### What action do I need to take?

- Please, check the documentation of the affected commands to see the updated option naming and adjust your scripts accordingly.

### Removes duplicate property from 'spo list list' command.

In the [spo list list](./cmd/spo/list/list-list.mdx) we removed the `Url` from the command output as it was a duplicate of the `RootFolder/ServerRelativeUrl` property.

#### What action do I need to take?

- Please update your scripts not to use the `Url` property from the command output.

### Updated command `spo file copy`

Because of some limitations of the current [spo file copy](./cmd/spo/file/file-copy.mdx) command, we have decided to move it to a new endpoint. This change is necessary to ensure the command's functionality and reliability. Because of the new endpoint, the command input and output have changed.

**Command options:**

Unfortunately, we had to drop the `--resetAuthorAndCreated` options as it's no longer supported by the new endpoint. In return, we were able to add two new options:
- `--ignoreVersionHistory`: Only copy the most recent version of the file and ignore the version history.
- `--skipWait`: Don't wait for the copy operation to complete.

**Command output:**

In the past versions of CLI for Microsoft 365, the command had no output. When using option `--nameConflictBehavior rename`, it's hard for the user to know what the actual name of the copied file is. With the new endpoint, the command now returns the file information about the destination file, providing you with all the info you need to execute other commands on this file.

#### What action do I need to take?

When using the [spo file copy](./cmd/spo/file/file-copy.mdx) command, please use the new command input. This means that you'll have to remove option `--resetAuthorAndCreated` from your scripts and automation tools.
